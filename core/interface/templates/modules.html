{% extends 'base.html' %}

{% block header %}
	<script src="{{ url_for('static', filename='js/modules.js') }}"></script>
	{% block title %}{{ langData.modules }}{% endblock %}
{% endblock %}

{% block content %}
	{% for module in modules.values() %}
		<div id="config_for_{{ module.name }}" title="{{ langData.moduleSettings }}">
			<form name="config_for_{{ module.name }}" method="post" autocomplete="off" novalidate>
				{% for configName, configValue in module.getModuleConfigs() %}
					<label for="{{ configName }}">{{ configName }}</label>
					{% if configValue is sameas true or configValue is sameas false %}
						<input type="checkbox" name="{{ configName }}" value="{{ configValue }}" id="{{ configName }} {% if configValue is sameas true %}checked{% endif %}">
					{% else %}
						<input type="text" name="{{ configName }}" value="{{ configValue }}" id="{{ configName }}">
					{% endif %}
				{% endfor %}
				<input type="hidden" name="moduleName" value="{{ module.name }}">
				<input type="submit" value="{{ langData.OK }}">
			</form>
		</div>
	{% endfor %}
	<div class="modulesPane">
	{% for moduleName, module in modules.items() %}
		<div class="moduleTile">
			<div class="moduleTitle">
				<div class="moduleName">{{ moduleName }}</div>
				<div class="moduleVersion">v {{ module.version }}</div>
			</div>
			<div class="moduleContainer moduleDefaultView">
				<div class="moduleAuthor">
					{{ langData.by }} {{ module.author }}
				</div>
				<div class="moduleStatus {% if module.active is sameas true %}active{% else %}disabled{% endif %}">
					{{ langData.status }}: {% if module.active is sameas true %}enabled{% else %}disabled{% endif %}
				</div>
				<div class="moduleViewIntents">
					 {{ langData.viewIntents }} <i class="fas fa-eye"></i>
				</div>
				<div class="moduleSettings" data-forModule="{{ moduleName }}">
					{{ langData.moduleSettings }} <i class="fas fa-cog"></i>
				</div>
				<div class="moduleActions">
					<div class="moduleButton"{% if module.required is sameas true %} style="display: none;"{% endif %} id="toggle_{{ moduleName }}">
						{% if module.active is sameas true %}
							{{ langData.disable }}
						{% else %}
							{{ langData.enable }}
						{% endif %}
					</div>
					<div class="moduleButton"{% if module.required is sameas true %} style="display: none;"{% endif %} id="delete_{{ moduleName }}">
						{{ langData.delete }}
					</div>
					{% if module.updateAvailable is sameas true %}
						<div class="moduleButton" id="update_{{ moduleName }}">
							{{ langData.updatee }}
						</div>
					{% endif %}
				</div>
			</div>
			<div class="moduleContainer moduleIntentsView">
				<div class="moduleIntentsViewCloseButton">
					<i class="fas fa-times-circle"></i>
				</div>
				<div class="modulesIntentsViewList">
					{% for intent in module.supportedIntents %}
						{% if not 'Dummy' in intent %}
							<div class="intentTopic" title="{{ module.getUtterancesByIntent(intent, true, true)|random }}">{{ intent.justTopic }}</div>
						{% endif %}
					{% endfor %}
				</div>
			</div>
		</div>
	{% endfor %}
	</div>
{% endblock %}